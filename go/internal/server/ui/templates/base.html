{{define "base"}}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/img/favicon-16x16.png">
    <link rel="manifest" href="/static/img/site.webmanifest">
    <title>{{template "title" .}} - EthScanner</title>
    <!-- Tailwind CSS (via local static) -->
    <script src="/static/tailwind.3.4.17.min.js"></script>
    <!-- HTMX -->
    <script src="/static/htmx.1.9.10.min.js"></script>
    <!-- HTMX WebSocket Extension -->
    <script src="/static/htmx.ws.2.0.8.min.js"></script>
    <!-- uPlot (Live Charting) -->
    <link rel="stylesheet" href="/static/uplot.1.6.30.min.css">
    <script src="/static/uplot.1.6.30.min.js"></script>
    <style>
        [hx-cloak] {
            display: none !important;
        }
    </style>
</head>

<body class="bg-gray-100 min-h-screen text-gray-900 font-sans flex flex-col">
    <!-- Navbar -->
    <header class="bg-gray-900 text-white shadow-md z-10 sticky top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo & Branding -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <img class="h-8 w-8 rounded-md" src="/static/img/apple-touch-icon.png" alt="EthScanner Logo">
                    </div>
                    <span class="ml-3 text-lg font-bold tracking-tight">EthScanner <span
                            class="text-blue-400">Master</span></span>
                </div>

                <!-- Desktop Top Nav -->
                {{if not .HideNav}}
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="/dashboard" {{navAttr .CurrentPath "/dashboard" "" }}>Overview</a>
                        <a href="/dashboard/daily" {{navAttr .CurrentPath "/dashboard/daily" "" }}>Daily</a>
                        <a href="/dashboard/monthly" {{navAttr .CurrentPath "/dashboard/monthly" "" }}>Monthly</a>
                        <a href="/dashboard/leaderboard" {{navAttr .CurrentPath "/dashboard/leaderboard" "" }}>Hall of
                            Fame</a>
                        <a href="/dashboard/workers" {{navAttr .CurrentPath "/dashboard/workers" "" }}>Workers</a>
                        <a href="/dashboard/settings" {{navAttr .CurrentPath "/dashboard/settings" "" }}>Settings</a>
                    </div>
                </div>
                {{end}}

                <!-- Mobile Menu Button -->
                <div class="md:hidden flex items-center">
                    <button type="button" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"
                        class="bg-gray-800 p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 transition">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>

                <!-- User actions (Desktop Only) -->
                <div class="hidden md:flex items-center space-x-3">
                    {{if not .HideNav}}
                    <form action="/logout" method="POST" class="inline">
                        <button type="submit"
                            class="bg-gray-800 hover:bg-red-700 text-white px-3 py-1.5 rounded-md text-xs font-semibold transition uppercase">
                            Logout
                        </button>
                    </form>
                    {{else}}
                    <span class="text-xs text-gray-500 uppercase font-bold tracking-widest">v1.2.0-distributed</span>
                    {{end}}
                </div>
            </div>
        </div>

        <!-- Mobile Menu (Hidden by default) -->
        {{if not .HideNav}}
        <div id="mobile-menu" class="hidden md:hidden border-t border-gray-800 bg-gray-900 absolute w-full shadow-lg">
            <div class="px-4 py-3 space-y-2">
                <a href="/dashboard" {{navAttr .CurrentPath "/dashboard" "block w-full" }}>Overview</a>
                <a href="/dashboard/daily" {{navAttr .CurrentPath "/dashboard/daily" "block w-full" }}>Daily</a>
                <a href="/dashboard/monthly" {{navAttr .CurrentPath "/dashboard/monthly" "block w-full" }}>Monthly</a>
                <a href="/dashboard/leaderboard" {{navAttr .CurrentPath "/dashboard/leaderboard" "block w-full" }}>Hall
                    of Fame</a>
                <a href="/dashboard/workers" {{navAttr .CurrentPath "/dashboard/workers" "block w-full" }}>Workers</a>
                <a href="/dashboard/settings" {{navAttr .CurrentPath "/dashboard/settings" "block w-full"
                    }}>Settings</a>
                <div class="border-t border-gray-700 pt-2 mt-2">
                    <form action="/logout" method="POST" class="w-full">
                        <button type="submit"
                            class="w-full text-left px-3 py-2 text-red-400 hover:bg-gray-800 rounded-md text-sm font-medium transition">
                            Logout
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {{end}}
    </header>

    <!-- Content Area -->
    <main class="flex-grow w-full overflow-x-hidden">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6">
            <div hx-ext="ws" ws-connect="/api/v1/ws" ws-receive>
                {{template "content" .}}
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 mt-auto w-full">
        <div
            class="max-w-7xl mx-auto py-6 px-4 flex flex-col md:flex-row justify-between items-center text-gray-500 text-sm">
            <p>&copy; 2026 EthScanner Distributed. All rights reserved.</p>
            <div class="flex space-x-6 mt-4 md:mt-0 items-center">
                <a href="https://github.com/garnizeh/eth-scanner"
                    class="hover:text-gray-900 transition underline underline-offset-4">GitHub</a>
                <span class="hidden md:inline text-gray-300">|</span>
                <span class="font-mono text-[10px] uppercase tracking-tighter">Distributed ETH Key Search Engine</span>
            </div>
        </div>
    </footer>
    {{block "scripts" .}}{{end}}
</body>

</html>
{{end}}