# P06-T020: Implement DeriveEthereumAddress function

**Phase:** P06 - PC Worker - Crypto & Scanning Engine  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P06-T010  
**Estimated Effort:** Medium (1-3h)

---

## Description

Implement the `DeriveEthereumAddress()` function in `internal/worker/crypto.go` that takes a 32-byte private key and returns the corresponding Ethereum address. This function performs the core cryptographic operations: derive public key from private key using secp256k1, then hash with Keccak256 and take the last 20 bytes.

---

## Acceptance Criteria

- [ ] Function `DeriveEthereumAddress(privateKey [32]byte) (common.Address, error)` implemented
- [ ] Function uses `crypto.ToECDSA()` to convert bytes to ECDSA private key
- [ ] Function uses `crypto.PubkeyToAddress()` to derive address
- [ ] Function handles invalid private keys gracefully (returns error)
- [ ] Unit tests written covering success and error cases
- [ ] Tests verify correctness against known test vectors

---

## Implementation Notes

**Key Points:**
- Reference SDD section: 4.3.2 (Key Derivation)
- The go-ethereum library handles secp256k1 and Keccak256 internally
- Function should be pure (no side effects, deterministic)
- Error handling: wrap errors with context using `fmt.Errorf` with `%w`

**Code Pattern:**
```go
func DeriveEthereumAddress(privateKey [32]byte) (common.Address, error) {
	// Convert byte array to ECDSA private key
	ecdsaKey, err := crypto.ToECDSA(privateKey[:])
	if err != nil {
		return common.Address{}, fmt.Errorf("invalid private key: %w", err)
	}
	
	// Derive Ethereum address from public key
	address := crypto.PubkeyToAddress(ecdsaKey.PublicKey)
	return address, nil
}
```

**Test Vector:**
Use well-known Ethereum test vectors to verify correctness.

---

## Testing

- Unit test with valid private key (verify known address output)
- Unit test with invalid private key (all zeros, verify error)
- Unit test with maximum value private key
- Benchmark test to measure throughput (keys/sec)

---

## References

- SDD: `docs/architecture/system-design-document.md` (Section 4.3.2)
- Ethereum Yellow Paper: Address derivation specification
- go-ethereum docs: https://pkg.go.dev/github.com/ethereum/go-ethereum/crypto
- Related tasks: P06-T030, P06-T110
