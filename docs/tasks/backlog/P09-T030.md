# P09-T030: Write unit tests for nonce range allocation logic

**Phase:** P09 - Integration, Testing & Validation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P04-T030  
**Estimated Effort:** Medium

---

## Description

Verify the mathematical correctness of how nonce ranges are split and allocated to different workers (PC and ESP32).

## Acceptance Criteria

- [ ] Test `CalculateNextRange` for sequential ranges without gaps.
- [ ] Test allocation with different requested batch sizes.
- [ ] Test the rollover case when the `prefix_28` is exhausted.

## Implementation Notes

- Focus on the logic in `internal/jobs/manager.go` related to nonce math.

## Testing

- Run dedicated Go tests with table-driven scenarios for various range sizes.

## References

- OVERVIEW: Phase 09 section.
