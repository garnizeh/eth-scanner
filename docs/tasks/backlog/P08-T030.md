# P08-T030: Implement derive_eth_address() (secp256k1 point multiplication).

**Phase:** P08 - ESP32 Worker - Crypto & Computation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P08-T020  
**Estimated Effort:** Medium

---

## Description

Combine the `secp256k1` point multiplication and `keccak256` hashing to implement the full Ethereum address derivation process: `Private Key -> Public Key -> Ethereum Address`.

## Acceptance Criteria

- [ ] Implement `derive_eth_address(priv_key, address)` function.
- [ ] Correctly handle public key prefix removal (strip the first byte `0x04`).
- [ ] Correctly take the last 20 bytes of the `keccak256` hash of the public key.
- [ ] Validated against known Ethereum private key/address pairs.

## Implementation Notes

- Input: 32-byte private key.
- Output: 20-byte Ethereum address.
- Use static buffers for intermediate public key storage.
- The public key should be the uncompressed 64-byte version (excluding the 0x04 prefix) before hashing.

## Testing

- Create unit tests in `esp32/test/` with standard Ethereum test vectors.
- Assert matching addresses for provided private keys.

## References

- SDD: `docs/architecture/system-design-document.md` (section 3.A)
