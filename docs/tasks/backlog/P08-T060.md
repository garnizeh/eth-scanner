# P08-T060: Set up FreeRTOS Timer for periodic background checkpointing (every 60s).

**Phase:** P08 - ESP32 Worker - Crypto & Computation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P08-T040  
**Estimated Effort:** Medium

---

## Description

Implement a periodic checkpoint mechanism using a FreeRTOS timer. The timer should fire every 60 seconds (configurable) to trigger a progress update to the Master API and save state to NVS.

## Acceptance Criteria

- [ ] Create a FreeRTOS software timer for periodic checkpoints.
- [ ] Implement a timer callback that signals Core 0 to perform a checkpoint.
- [ ] Ensure checkpoints only fire when a job is actually active.
- [ ] Verify that checkpoints do not block the Core 1 hot loop.

## Implementation Notes

- Checkpointing frequency is suggested at 60 seconds for ESP32.
- The callback should not perform network operations directly (as it's in a timer context). It should signal Core 0 to perform the work.
- Use `xTaskNotify` with an "ACTION_CHECKPOINT" bit to wake Core 0.

## Testing

- Log "Checkpoint triggered" every 60 seconds.
- Verify Master API receives the checkpoint PATCH request.

## References

- SDD: Section on Checkpoint updates.
- OVERVIEW: Dual-Core Logic section.
