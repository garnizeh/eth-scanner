# P08-T080: Implement optimized Nonce loop (direct byte manipulation, avoiding sprintf).

**Phase:** P08 - ESP32 Worker - Crypto & Computation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P08-T070  
**Estimated Effort:** Medium

---

## Description

Implement the core iteration loop within Core 1. It must efficiently manipulate the 32-byte private key buffer by only updating the 4-byte nonce portion (little-endian) to minimize overhead.

## Acceptance Criteria

- [ ] Use a static 32-byte buffer for the private key (`prefix_28 + 4-byte nonce`).
- [ ] Efficiently increment the nonce directly in the buffer using pointer manipulation or byte increments.
- [ ] Avoid `sprintf`, `memcpy`, or other expensive operations inside the hot loop.
- [ ] Correctly handle the transition from `nonce_start` to `nonce_end`.

## Implementation Notes

- Nonce should be in little-endian format as per the SDD specification.
- Use `uint32_t` for the nonce and cast or write its individual bytes into the buffer.
- The loop should look like: `while(nonce < nonce_end) { update_nonce(buf, nonce); process(buf); nonce++; }`.

## Testing

- Measure keys/sec throughput on serial output.
- Log intermediate nonces to ensure correct progression (ensure this is disabled during the final benchmark).

## References

- SDD: Architecture: 28-byte Prefix + 4-byte Nonce section.
- OVERVIEW: Phase 08 description.
