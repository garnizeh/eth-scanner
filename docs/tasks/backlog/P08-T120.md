# P08-T120: Validate NVS recovery and Task Watchdog (TWDT) resilience under 100% CPU load.

**Phase:** P08 - ESP32 Worker - Crypto & Computation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P07-T070, P08-T080  
**Estimated Effort:** Medium

---

## Description

Ensure that the system remains stable under full CPU load on Core 1 and that the Task Watchdog does not trigger erroneously. Also, verify that the NVS recovery mechanism correctly resumes work after a simulated power failure.

## Acceptance Criteria

- [ ] Core 1 task correctly yields to or interacts with the Watchdog if necessary (e.g., calling `esp_task_wdt_reset()`).
- [ ] Simulate power loss by resetting the ESP32 mid-job and verify it resumes from the last NVS checkpoint.
- [ ] System remains connected to WiFi even while Core 1 is at 100% load.

## Implementation Notes

- Use `esp_task_wdt_add(core1_handle)` if necessary, but carefully manage resets inside the hot loop only when absolutely needed to not impact performance.
- Alternatively, ensure Core 0 (System Core) can still reset the watchdog for the whole chip.

## Testing

- Run the worker for 10 minutes at 100% load and check for reset reasons.
- Serial output monitoring for "Resuming from checkpoint..." after a reset.

## References

- SDD: Job Lifecycle section.
- OVERVIEW: Technical Notes (Dual-Core Logic).
