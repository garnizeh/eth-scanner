# P04-T100: Implement final_nonce validation (must equal nonce_end)

**Phase:** P04 - Master API - Job Management (Dynamic Batching)  
**Status:** Done
**Priority:** High  
**Completed On:** 2026-02-15

## Summary

Added validation to the job completion endpoint to ensure `final_nonce` equals the job's `nonce_end`. The handler returns 400 Bad Request when the values differ. Unit tests cover final_nonce less than, greater than, and equal to nonce_end.

## Acceptance Criteria (completed)
- [x] Completion handler validates `final_nonce == job.nonce_end`
- [x] Returns 400 Bad Request if final_nonce doesn't match nonce_end
- [x] Error message explains the mismatch clearly
- [x] Unit test covers: final_nonce < nonce_end (partial completion)
- [x] Unit test covers: final_nonce > nonce_end (error)
- [x] Unit test covers: final_nonce == nonce_end (success)

## Implementation notes

- Validation implemented in `go/internal/server/complete.go`.
- Tests added in `go/internal/server/complete_test.go`.
- Full test suite and linting were run locally; server tests passed.
