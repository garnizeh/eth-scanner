# P04-T010: Implement internal/jobs/manager.go skeleton — Done

**Phase:** P04 - Master API - Job Management (Dynamic Batching)  
**Status:** Completed  
**Priority:** High  
**Dependencies:** P02-T050  
**Estimated Effort:** Small (< 1h)

---

## Summary

Implemented the `Manager` skeleton for job management and added a basic unit test. The new files are:

- `go/internal/jobs/manager.go` — defines `Manager` struct and `New` constructor
- `go/internal/jobs/manager_test.go` — basic constructor unit test

I ran `go test ./...` in the `go/` module to verify compilation and tests — all packages passed locally.

---

## Description

Create the foundational job manager module that will handle all job-related business logic. This skeleton defines the `Manager` struct with its dependencies (database connection) and provides the constructor for subsequent job management operations.

---

## Acceptance Criteria

- [x] File `go/internal/jobs/manager.go` created
- [x] `Manager` struct defined with database dependency
- [x] Constructor function `New(db *database.Queries) *Manager` implemented
- [x] File compiles without errors
- [x] Basic unit test file `manager_test.go` created with constructor test

---

## Implementation Notes

**Code used:**

```go
package jobs

import "github.com/garnizeh/eth-scanner/internal/database"

// Manager encapsulates job management operations.
type Manager struct {
    db *database.Queries
}

// New constructs a new Manager with the provided database queries.
func New(db *database.Queries) *Manager {
    return &Manager{db: db}
}
```

The implementation follows dependency injection and keeps the manager minimal so future tasks can add methods for leasing, allocation, checkpoints, and completion.

---

## Testing

Run the module tests to verify compilation and the constructor test:

```bash
cd go
go test ./...
```

Observed: all packages passed, including `internal/jobs`.

---

## References

- SDD: `docs/architecture/system-design-document.md`
- Database queries: `go/internal/database/queries.sql.go` (generated by sqlc)
- Related task: P04-T020 (lease logic)

---

## Notes

This task is complete; further job manager behavior will be implemented under subsequent Phase 04 tasks.
