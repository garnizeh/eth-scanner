# P05-T060: Implement SubmitResult() function

**Phase:** P05 - PC Worker - Core Implementation  
**Status:** Completed  
**Priority:** Medium  
**Dependencies:** P05-T020  
**Estimated Effort:** Small

---

Summary
-------
Implemented `SubmitResult()` in the worker client (`go/internal/worker/client.go`) and added unit tests covering success and failure cases. The implementation:

- Sends POST /api/v1/results with `worker_id`, `private_key` (hex-encoded 32 bytes), `ethereum_address`, and `found_at` (RFC3339 UTC)
- Validates private key length (32 bytes) before sending
- Includes optional `X-API-Key` header when configured
- Returns HTTP 201 Created as success
- Returns sentinel `ErrUnauthorized` for HTTP 401 and wraps other API errors

Tests added in `go/internal/worker/client_test.go` include:

- Successful submission (201 Created) and verification of payload and timestamp
- Invalid private key length returns a descriptive error
- 401 -> `ErrUnauthorized`
- 400/other non-2xx responses wrapped as `*APIError` and surfaced as `result submission failed: ...`

Notes
-----
- Timestamp uses `time.Now().UTC().Format(time.RFC3339)`.
- Address validation (checksummed) is assumed to be handled server-side for now; client enforces private key length only.

Files changed (summary)
- `go/internal/worker/client.go` — added `SubmitResult()` and `resultRequest` type
- `go/internal/worker/client_test.go` — added tests for SubmitResult behavior

Acceptance Criteria (checked)

- [x] `SubmitResult(ctx context.Context, privateKey []byte, address string)` function added to `Client`
- [x] Function sends POST request to `/api/v1/results`
- [x] Request includes API key in `X-API-Key` header (optional)
- [x] Request body contains `worker_id`, `private_key` (hex-encoded), `ethereum_address`, `found_at`
- [x] Response status 201 Created indicates success
- [x] Context cancellation respected (requests use context)
- [x] Private key validation (32 bytes) implemented
- [x] Returns descriptive/wrapped error for failure cases

---

Completed by: automated agent (copilot) with user review steps
