# P06-T040: Implement scanner.go with nonce range scanning

**Phase:** P06 - PC Worker - Crypto & Scanning Engine  
**Status:** Completed  
**Priority:** High  
**Dependencies:** P06-T030  
**Estimated Effort:** Medium (1-3h)

**Completed:** 2026-02-15  
**Summary:** Implemented `ScanRange` in `internal/worker/scanner.go`, added unit tests verifying no-match, match at nonce, inclusive end scanning, and context cancellation behavior.

---

## Description

Created `internal/worker/scanner.go` which provides:

- `Job` struct with `Prefix28`, `NonceStart`, `NonceEnd`, and `ExpiresAt` fields.
- `ScanResult` struct containing found private key, address, and nonce.
- `ScanRange(ctx, job, targetAddr)` that scans the full inclusive nonce range, constructs private keys via `ConstructPrivateKey`, derives addresses using `DeriveEthereumAddress`, and returns immediately on match. The function checks `ctx.Done()` every 10,000 iterations to respect cancellation.

---

## Testing

Unit tests added in `internal/worker/scanner_test.go`:

- `TestScanRange_NoMatch`
- `TestScanRange_FindAtNonce`
- `TestScanRange_InclusiveEnd`
- `TestScanRange_ContextCancelled`

Run locally:

```bash
cd go
go test ./internal/worker -run TestScanRange -v
```

All tests pass locally.

---

## Notes

- The loop uses a uint64 index to avoid uint32 wraparound when `NonceEnd` is `0xFFFFFFFF`.
- The implementation skips invalid private keys returned by `DeriveEthereumAddress` and continues scanning.
