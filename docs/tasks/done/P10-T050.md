# P10-T050: Implement "Active Workers" component (HTMX swap on WebSocket message)

**Phase:** P10 - Dashboard & Monitoring UI  
**Status:** Completed  
**Priority:** High  
**Dependencies:** [P10-T040]  
**Estimated Effort:** Medium

---

## Description

Create the real-time workers list. This component will use HTMX's WebSocket extension to swap out fragments of the table whenever a worker starts, checkpoints, or stops.

## Acceptance Criteria

- [x] Define the `active_workers.html` fragment (SSR table).
- [x] Connect the WebSocket broadcast to the HTML ID of the workers table.
- [x] Implement the server-side logic to fetch active workers from `worker_history` (Tier 1).
- [x] Add "last seen", "current throughput", and "active prefix" columns.
- [x] Use HTMX "swap" behavior to update specific rows when possible or the entire table for simplicity.

## Implementation Notes

- Added `active_workers.html` fragment for table rendering.
- Updated `hub.go` to broadcast `active-workers` fragment via `hx-swap-oob`.
- Implemented `GetActiveWorkerDetails` in SQL for rich worker stats.
- Created `progressStyle` and `workerIconClass` template helpers for improved UI.
- Removed sidebar in favor of a clean mobile-friendly top nav.

## Testing

- Open a dashboard instance.
- Start multiple workers and verify the table adds them automatically.
- Verify status updates in real-time without page reloads.

## References

- SDD: Tier 1 Statistics section
- [htmx.org - WebSockets](https://htmx.org/extensions/web-sockets/)
