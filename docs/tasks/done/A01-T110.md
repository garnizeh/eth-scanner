---
id: A01-T110
title: Master API: support list of target addresses
status: Completed
owner: GitHub Copilot
completed_at: 2026-02-20
tags:
  - api
  - master
  - feature
---

## Summary

Allow the Master API to accept and distribute a list of target Ethereum addresses to workers instead of a single target address. Workers should test generated addresses against the provided list.

## Motivation

Testing multiple target addresses per prefix reduces round-trips and allows workers to scan for several addresses in one pass.

## Acceptance criteria

- [x] Update API schema for lease responses to include an array of target addresses.
- [x] Update client/server code paths to accept/emit the list and to validate address formats.
- [x] Update worker scanning logic to check generated addresses against all addresses in the list.
- [x] update esp32 worker scanning logic to check generated addresses against all addresses in the list.
- [x] Add unit/integration tests for API and worker behavior (including invalid address formats).
- [ ] Document the new API field in the API docs.

## Implementation notes

- Keep backward compatibility: if a single address is provided, still populate the list with one entry.
- Use canonical hex address format prefixed with `0x` and lowercase normalization.
- Combined `MASTER_TARGET_ADDRESS` and `MASTER_TARGET_ADDRESSES` in `go/internal/config/config.go` for seamless transition.
- Updated `go/Makefile` to pass `MASTER_TARGET_ADDRESSES` to the master process.

## Steps

1. [x] Update API types and SQL schema if needed.
2. [x] Modify lease handler and response struct.
3. [x] Update worker scanning logic to test against list.
4. [x] Add tests and documentation.
