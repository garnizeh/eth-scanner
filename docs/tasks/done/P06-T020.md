# P06-T020: Implement DeriveEthereumAddress function

**Phase:** P06 - PC Worker - Crypto & Scanning Engine  
**Status:** Completed  
**Priority:** High  
**Dependencies:** P06-T010  
**Estimated Effort:** Medium (1-3h)

**Completed:** 2026-02-15
**Summary:** Implemented `DeriveEthereumAddress(privateKey [32]byte) (common.Address, error)` in `internal/worker/crypto.go`. Added unit tests validating behavior and deterministic agreement with the `go-ethereum` library.

---

## Description

Derive the Ethereum address from a 32-byte private key using secp256k1 and Keccak256 as implemented by `github.com/ethereum/go-ethereum/crypto`.

---

## Acceptance Criteria

- [x] Function implemented using `crypto.ToECDSA()` and `crypto.PubkeyToAddress()`
- [x] Handles invalid private keys with an error
- [x] Unit tests written (success, invalid key, deterministic vector)
- [x] Tests pass locally

---

## Implementation Notes

- File: `go/internal/worker/crypto.go` contains `DeriveEthereumAddress`.
- Tests: `go/internal/worker/crypto_test.go` includes:
  - `TestDeriveEthereumAddress_Success` (random key)
  - `TestDeriveEthereumAddress_InvalidKey` (zero key)
  - `TestDeriveEthereumAddress_TestVector` (deterministic vector compared against go-ethereum)

---

## Testing / Verification

- Ran `go test ./internal/worker -run TestDeriveEthereumAddress -v` â†’ PASS

---

## References

- SDD: `docs/architecture/system-design-document.md` (Section 4.3.2)
