# P02-T030: Configure sqlc.yaml for code generation

**Phase:** P02 - Database Layer Implementation  
**Status:** Completed  
**Priority:** High  
**Dependencies:** P01-T040  
**Estimated Effort:** Small

---

## Description

Create and configure `go/sqlc.yaml` to generate type-safe Go code from SQL queries and schema. This configuration specifies the database engine (SQLite), input files (schema and queries), and output settings.

---

## Acceptance Criteria

- [x] Create `sqlc.yaml` in go/ directory
- [x] Set engine to "sqlite"
- [x] Configure queries path: `internal/database/sql/queries.sql`
- [x] Configure schema path: `internal/database/sql/`
- [x] Set output package name: "database"
- [x] Set output directory: `internal/database`
- [x] Enable JSON tags (emit_json_tags: true)
- [x] Enable interface generation (emit_interface: true)
- [x] Enable empty slices (emit_empty_slices: true)
- [x] Verify sqlc.yaml is valid YAML
- [x] Add sqlc target to Makefile

---

## Implementation Notes

Configuration file created at `/home/user/code/garnizeh/eth-scanner/go/sqlc.yaml`:

```yaml
version: "2"
sql:
  - engine: "sqlite"
    queries: "internal/database/sql/queries.sql"
    schema: "internal/database/sql/"
    gen:
      go:
        package: "database"
        out: "internal/database"
        sql_package: "database/sql"
        emit_json_tags: true
        emit_interface: true
        emit_exact_table_names: false
        emit_empty_slices: true
```

**Key Configuration Details:**
- **engine**: `sqlite` - Use SQLite driver
- **queries**: Points to queries.sql file
- **schema**: Points to sql/ directory (includes 001_schema.sql)
- **package**: `database` - Generated code package name
- **out**: `internal/database` - Output directory
- **emit_json_tags**: Adds JSON tags to structs
- **emit_interface**: Generates Querier interface
- **emit_empty_slices**: Returns empty slices instead of nil

**Makefile Integration:**
```makefile
sqlc:
	@echo "Generating sqlc code..."
	@sqlc generate
	@echo "âœ“ Database code generated"
```

---

## Testing

Configuration validated by running `sqlc generate` successfully in P02-T040.

---

## References

- sqlc configuration docs: https://docs.sqlc.dev/en/stable/reference/config.html
- Config file: `sqlc.yaml`
- Related tasks: P02-T040
