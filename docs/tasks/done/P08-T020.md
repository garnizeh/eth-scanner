# P08-T020: Implement keccak256 hashing (utilizing ESP32 SHA Hardware Acceleration).

**Phase:** P08 - ESP32 Worker - Crypto & Computation  
**Status:** Not Started  
**Priority:** High  
**Dependencies:** P08-T010  
**Estimated Effort:** Medium

---

## Description

Implement the `keccak256` hashing function, which is required for deriving Ethereum addresses from public keys. The implementation should leverage the ESP32's built-in SHA hardware accelerator if possible, or provide a highly optimized software implementation.

## Acceptance Criteria

- [x] Implement `keccak256(input, len, output)` function.
- [x] Use `esp_rom_sha.h` or appropriate hardware-accelerated drivers if available for Keccak (Note: regular ESP32 has no Keccak hardware acceleration, used optimized trezor-crypto software instead).
- [x] Ensure the implementation produces correct Ethereum-compatible hashes.
- [x] Avoid dynamic memory allocations (`malloc`/`free`) during hashing.

## Implementation Notes

- Note: The ESP32's hardware accelerator supports SHA-256/384/512, but Keccak-256 (used by Ethereum) is slightly different. Verify if hardware acceleration is possible or use an optimized C/assembly version.
- Ensure compatibility with the `trezor-crypto` or other integrated libraries from P08-T010.

## Testing

- Verify against known test vectors (e.g., `keccak256("")` = `c5d24601...`).
- Add unit tests in `esp32/test/test_crypto.c`.

## References

- SDD: `docs/architecture/system-design-document.md` (section 3.A)
- Related: P08-T010
